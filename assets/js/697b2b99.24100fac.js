"use strict";(self.webpackChunkVRChat_Creator_Docs=self.webpackChunkVRChat_Creator_Docs||[]).push([[1685],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>s});var o=n(96540);const i={},r=o.createContext(i);function a(e){const t=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),o.createElement(r.Provider,{value:t},e.children)}},98112:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>h,contentTitle:()=>s,default:()=>c,frontMatter:()=>a,metadata:()=>o,toc:()=>l});const o=JSON.parse('{"id":"avatars/rig-requirements","title":"Rig Requirements","description":"This page is significantly out of date, but should still be mostly accurate.","source":"@site/docs/avatars/rig-requirements.md","sourceDirName":"avatars","slug":"/avatars/rig-requirements","permalink":"/creator-docs_ja/avatars/rig-requirements","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1733872665000,"frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Playable Layers","permalink":"/creator-docs_ja/avatars/playable-layers"},"next":{"title":"Shader Blocking and Fallback System","permalink":"/creator-docs_ja/avatars/shader-fallback-system"}}');var i=n(74848),r=n(28453);const a={},s="Rig Requirements",h={},l=[{value:"Export Settings",id:"export-settings",level:2},{value:"Humanoid Rig",id:"humanoid-rig",level:2},{value:"Finger Mappings",id:"finger-mappings",level:2},{value:"Spine Hierarchy",id:"spine-hierarchy",level:2},{value:"Arm and Leg Hierarchy",id:"arm-and-leg-hierarchy",level:2},{value:"General Hierarchy",id:"general-hierarchy",level:2},{value:"Full-Body Tracking",id:"full-body-tracking",level:2},{value:"Toe Bones",id:"toe-bones",level:2}];function d(e){const t={a:"a",admonition:"admonition",h1:"h1",h2:"h2",header:"header",p:"p",strong:"strong",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.header,{children:(0,i.jsx)(t.h1,{id:"rig-requirements",children:"Rig Requirements"})}),"\n",(0,i.jsx)(t.admonition,{type:"caution",children:(0,i.jsx)(t.p,{children:"This page is significantly out of date, but should still be mostly accurate."})}),"\n",(0,i.jsx)(t.p,{children:"This page explains some of the requirements for configuring your avatar's rig, bones, and armature. If you follow these requirements, your avatar's limbs should move correctly in VRChat."}),"\n",(0,i.jsxs)(t.p,{children:["You can also check the ",(0,i.jsx)(t.a,{href:"/avatars/creating-your-first-avatar#step-6---going-to-the-build-tab--checking-if-the-avatar-is-ok",children:"SDK build panel"}),' and look for errors in the "Validations" section.']}),"\n",(0,i.jsx)(t.h2,{id:"export-settings",children:"Export Settings"}),"\n",(0,i.jsx)(t.p,{children:"When exporting your rig from your 3D editor of choice, ensure your coordinate settings are correct. Most of the time, the defaults are correct."}),"\n",(0,i.jsx)(t.p,{children:"For Blender, ensure that your rest X rotation is 90 degrees."}),"\n",(0,i.jsx)(t.h2,{id:"humanoid-rig",children:"Humanoid Rig"}),"\n",(0,i.jsxs)(t.p,{children:["Unity will flag your humanoid rig configuration if it does not meet the Mecanim requirements for a humanoid. Please read and be familiar with the ",(0,i.jsx)(t.a,{href:"https://docs.unity3d.com/Manual/FBXImporter-Rig.html",children:"Unity Documentation on configuring avatars"}),"."]}),"\n",(0,i.jsx)(t.admonition,{title:"Humanoid avatar must have head, hands and feet bones mapped.",type:"danger",children:(0,i.jsx)(t.p,{children:'You will see this message from the VRChat Build Control Panel if your avatar rig is humanoid but does not have the essential bones mapped.",'})}),"\n",(0,i.jsx)(t.admonition,{title:"Non-human avatars",type:"note",children:(0,i.jsx)(t.p,{children:"If your avatar diverges greatly from a human (ie. quadruped, hunching monster, etc), you should consider using a Generic rig and your own Animation Controller. See the SimpleAvatarController for an example. This is more advanced than making a humanoid, so you should be very familiar with Unity's Animation Controller system."})}),"\n",(0,i.jsx)(t.h2,{id:"finger-mappings",children:"Finger Mappings"}),"\n",(0,i.jsxs)(t.admonition,{title:"Thumb, Index, and Middle finger bones are not mapped, Full-Body IK will be disabled.",type:"caution",children:[(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"This warning does not appear for SDK3 avatars, as they have no problem with using armatures without finger bones."})," This error only occurs when using VRChat SDK2, which is deprecated and should not be used."]}),(0,i.jsx)(t.p,{children:"In order to have full IK (allowing crouching and automatic foot placement) you need to have these three finger bones mapped. If you ignore this warning, your avatar will not be able to crouch, and it's feet will not automatically step (unless you use controller locomotion)."}),(0,i.jsxs)(t.p,{children:["It will also prevent custom animation overrides on hand gestures from being played back. (This is ",(0,i.jsx)(t.strong,{children:"not"})," currently mentioned by the warning in the SDK.)"]})]}),"\n",(0,i.jsx)(t.h2,{id:"spine-hierarchy",children:"Spine Hierarchy"}),"\n",(0,i.jsxs)(t.admonition,{title:"Your rig has the UPPERCHEST mapped in the Humanoid Rig. This will cause problems with IK.",type:"danger",children:[(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.strong,{children:"This warning does not appear for SDK3 avatars, as they have no problem with using armatures with a mapped upper chest."})," This error only occurs when using VRChat SDK2, which is deprecated and should not be used."]}),(0,i.jsx)(t.p,{children:"If you must use SDK2, leave the upper chest bone blank when configuring your humanoid."})]}),"\n",(0,i.jsx)(t.admonition,{title:"Spine hierarchy missing elements, make sure that Pelvis, Spine, Chest, Neck and Shoulders are mapped.",type:"danger",children:(0,i.jsx)(t.p,{children:"These bones must all be mapped. If you get this message make sure none of these slots are empty. Note that the Neck and Chest slots are optional for Mecanim, but required for VRChat."})}),"\n",(0,i.jsx)(t.admonition,{title:"Spine hierarchy incorrect. Make sure that the parent of both Shoulders and the Neck is the Chest.",type:"danger",children:(0,i.jsx)(t.p,{children:"For the IK to work properly, you must have a specific hierarchy of bones around the chest. In your rig, your shoulder bones (mapped into Left Arm > Shoulder, Right Arm > Shoulder slots) must be direct children of your chest bone (mapped into Body > Chest slot). Also, the neck bone (mapped into Head > Neck slot) must also be a direct child of the Chest."})}),"\n",(0,i.jsx)(t.h2,{id:"arm-and-leg-hierarchy",children:"Arm and Leg Hierarchy"}),"\n",(0,i.jsxs)(t.admonition,{title:"LowerArm is not first child of UpperArm or Hand is not first child of LowerArm: you may have problems with Forearm rotations.",type:"caution",children:[(0,i.jsx)(t.p,{children:"VRChat's IK system looks at the first child of a bone when determining the bone layout. If you have other child bones, like prop-placement bones or twist-bones in your rig, they can confuse the IK. In this particular case, the SDK is seeing that your LowerArm is not the first-listed child of your UpperArm bone."}),(0,i.jsxs)(t.p,{children:["To fix this, move the child bone to the first position in the list of children of the parent bone. ",(0,i.jsx)(t.strong,{children:"You will have to unpack your avatar prefab to do this."})]}),(0,i.jsx)(t.p,{children:"Note that this message is naming the slot, not the actual bone name in your rig, so you'll have to look to see what bone is in that slot."})]}),"\n",(0,i.jsx)(t.admonition,{title:"LowerLeg is not first child of UpperLeg or Foot is not first child of LowerLeg: you may have problems with Shin rotations.",type:"caution",children:(0,i.jsx)(t.p,{children:"See above."})}),"\n",(0,i.jsx)(t.h2,{id:"general-hierarchy",children:"General Hierarchy"}),"\n",(0,i.jsx)(t.admonition,{title:"This avatar has a split heirarchy (Hips bone is not the ancestor of all humanoid bones). IK may not work correctly.",type:"caution",children:(0,i.jsx)(t.p,{children:"Some rigs split the hierarchy into two sections, upper and lower body. In this case the bone you put into the Body > Hips slot must be the ancestor (parent or higher) of the rest of the human bones you are mapping. Be very careful with these kinds of rigs! Often, the ancestor of these bones is a root bone on the ground or another placement which is a bad placement for a hip bone. Many of these rigs are unsuitable for use with VRChat and need to be re-rigged to work properly."})}),"\n",(0,i.jsx)(t.h2,{id:"full-body-tracking",children:"Full-Body Tracking"}),"\n",(0,i.jsx)(t.p,{children:"There are special considerations if you are using Full-Body tracking, ie. you have 3 HTC Tracking Pucks connected. There are several recommendations that will ensure that your avatar works well when using Full-Body tracking."}),"\n",(0,i.jsxs)(t.p,{children:["To see more detailed information on Full-Body Tracking rigging requirements, see our ",(0,i.jsx)(t.a,{href:"https://docs.vrchat.com/docs/full-body-tracking",children:"Full-Body Tracking system guide"}),"."]}),"\n",(0,i.jsx)(t.admonition,{title:"The angle between pelvis and thigh bones should be close to 180 degrees (this avatar's angle is ___). Your avatar may not work well with full-body IK and Tracking.",type:"caution",children:(0,i.jsx)(t.p,{children:"Full-body tracking is sensitive to the angle between the hip and upper leg bones. It's best to measure this angle when the AvatarTPoseController is applied to your avatar. Ideally, the hip bone is pointing straight up and the upper leg bones point straight down in the TPose, but slight divergence is okay. You can ignore this message if you are not going to use Full-Body Tracking."})}),"\n",(0,i.jsx)(t.h2,{id:"toe-bones",children:"Toe Bones"}),"\n",(0,i.jsx)(t.p,{children:"It is not required to map the Toe bones in a humanoid avatar. However, if you DO map them, your avatar is able to move up and down on their tiptoes. Mapping the toes also makes the automatic foot-stepping look more natural, as well as improving the appearance of balance by aligning the auto stance to the beginning of the toe bone rather than the heel."})]})}function c(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);
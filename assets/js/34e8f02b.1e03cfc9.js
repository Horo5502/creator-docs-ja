"use strict";(self.webpackChunkVRChat_Creator_Docs=self.webpackChunkVRChat_Creator_Docs||[]).push([[9659],{15853:(e,t,r)=>{r.d(t,{Ay:()=>a,RM:()=>o});var l=r(74848),n=r(28453);const o=[{value:"Importing the Example",id:"importing-the-example",level:2}];function i(e){const t={a:"a",h2:"h2",li:"li",ol:"ol",p:"p",...(0,n.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t.h2,{id:"importing-the-example",children:"Importing the Example"}),"\n",(0,l.jsx)(t.p,{children:"Follow the steps below to add this example to your Unity project:"}),"\n",(0,l.jsxs)(t.ol,{children:["\n",(0,l.jsxs)(t.li,{children:["Open ",(0,l.jsx)(t.a,{href:"https://creators.vrchat.com/sdk/example-central",children:"the Example Central Window"}),' from the window from the Unity Editor Menu under "VRChat SDK > \ud83c\udfe0 Example Central"']}),"\n",(0,l.jsx)(t.li,{children:"Find this prefab in the list or search for it by title (same as the title of this page)."}),"\n",(0,l.jsx)(t.li,{children:'Press the "Import" button to import the Unitypackage into your project.'}),"\n"]})]})}function a(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,l.jsx)(t,{...e,children:(0,l.jsx)(i,{...e})}):i(e)}},28453:(e,t,r)=>{r.d(t,{R:()=>i,x:()=>a});var l=r(96540);const n={},o=l.createContext(n);function i(e){const t=l.useContext(o);return l.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:i(e.components),l.createElement(o.Provider,{value:t},e.children)}},60575:(e,t,r)=>{r.d(t,{A:()=>o});var l=r(78429),n=r(74848);const o=e=>{let{versionKey:t,url:r,children:o}=e;const i=l.n[t]||l.n.defaultVersion,a=r.replace("<VERSION>",i);return(0,n.jsx)("a",{href:a,target:"_blank",children:o})}},78429:(e,t,r)=>{r.d(t,{n:()=>l});const l={major:"2022",minor:"2022.3",patch:"2022.3.22",defaultVersion:"2022.3.22f1"}},83191:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>h,contentTitle:()=>c,default:()=>x,frontMatter:()=>s,metadata:()=>l,toc:()=>d});const l=JSON.parse('{"id":"worlds/examples/detect-controller-collide","title":"Detect Controller Collide","description":"Detect a Character Controller colliding with something.","source":"@site/docs/worlds/examples/detect-controller-collide.md","sourceDirName":"worlds/examples","slug":"/worlds/examples/detect-controller-collide","permalink":"/creator-docs_ja/worlds/examples/detect-controller-collide","draft":false,"unlisted":false,"tags":[],"version":"current","lastUpdatedAt":1731955571000,"frontMatter":{"title":"Detect Controller Collide","description":"Detect a Character Controller colliding with something.","sidebar_custom_props":{"customIcon":"\ud83e\uddf1"}},"sidebar":"tutorialSidebar","previous":{"title":"AI Navigation Example","permalink":"/creator-docs_ja/worlds/examples/ai-navigation"},"next":{"title":"Image Loading Example","permalink":"/creator-docs_ja/worlds/examples/image-loading"}}');var n=r(74848),o=r(28453),i=r(15853),a=r(60575);const s={title:"Detect Controller Collide",description:"Detect a Character Controller colliding with something.",sidebar_custom_props:{customIcon:"\ud83e\uddf1"}},c=void 0,h={},d=[{value:"Using the Example",id:"using-the-example",level:2},...i.RM,{value:"Technical Breakdown",id:"technical-breakdown",level:2},{value:"OnCharacterControllerHitExampleGraph",id:"oncharactercontrollerhitexamplegraph",level:3},{value:"Variables",id:"variables",level:4},{value:"Events",id:"events",level:4}];function p(e){const t={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",img:"img",li:"li",p:"p",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:(0,n.jsx)(t.img,{alt:"Detect Controller Collide",src:r(89533).A+"",width:"1473",height:"829"})}),"\n",(0,n.jsxs)(t.p,{children:["The Unity event ",(0,n.jsx)(a.A,{versionKey:"minor",url:"https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/MonoBehaviour.OnControllerColliderHit.html",children:"OnControllerColliderHit"})," is useful for knowing when a ",(0,n.jsx)(a.A,{versionKey:"minor",url:"https://docs.unity3d.com/<VERSION>/Documentation/ScriptReference/CharacterController.html",children:"CharacterController"})," has collided with another object. VRChat adds the event ",(0,n.jsx)(t.a,{href:"/worlds/udon/players/player-collisions#physics",children:"OnControllerColliderHitPlayer"})," to detect when a CharacterController collides with another Player. This event includes a ",(0,n.jsx)(t.code,{children:"ControllerColliderPlayerHit"})," struct with a reference to the ",(0,n.jsx)(t.a,{href:"https://udonsharp.docs.vrchat.com/vrchat-api/#vrcplayerapi",children:"VRCPlayerApi"})," object for the player that was collided with."]}),"\n",(0,n.jsxs)(t.p,{children:["Visit the ",(0,n.jsx)(t.a,{href:"https://vrchat.com/home/world/wrld_7da557ad-3584-4b0a-bf61-6cbba33701d4",children:"Detect Controller Collide Example World"})," to try it for yourself!"]}),"\n",(0,n.jsx)(t.h2,{id:"using-the-example",children:"Using the Example"}),"\n",(0,n.jsx)(t.p,{children:'Start the scene in the Unity Editor or visit the world in VRChat. Look at the canvas in the world, and observe that the empty space below the "Last hit:" label changes to "Wall" when the capsule "character" collides with it.'}),"\n",(0,n.jsx)(t.p,{children:'Stand in-between the spawn point for the capsule and the wall so that it runs into you on the way to the wall, and you should see the label change to your display name when it collides with you! It will reset to its spawn point and continue running into you until you move aside. At that point, it will collide with the wall again and change the label back to "Wall".'}),"\n",(0,n.jsx)(i.Ay,{}),"\n",(0,n.jsx)(t.h2,{id:"technical-breakdown",children:"Technical Breakdown"}),"\n",(0,n.jsxs)(t.p,{children:["The scene has a ",(0,n.jsx)(t.code,{children:"DetectControllerCollide"})," GameObject which contains the main prefabs and logic for the example."]}),"\n",(0,n.jsxs)(t.p,{children:["The first child object, ",(0,n.jsx)(t.code,{children:"CharacterController"}),", has a CharacterController component on it as well as an UdonBehaviour with a Graph Program with the logic for detecting collisions."]}),"\n",(0,n.jsx)(t.h3,{id:"oncharactercontrollerhitexamplegraph",children:"OnCharacterControllerHitExampleGraph"}),"\n",(0,n.jsx)(t.h4,{id:"variables",children:"Variables"}),"\n",(0,n.jsx)(t.p,{children:"This graph has the following public variables:"}),"\n",(0,n.jsxs)(t.table,{children:[(0,n.jsx)(t.thead,{children:(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.th,{children:(0,n.jsx)(t.strong,{children:"Name"})}),(0,n.jsx)(t.th,{children:(0,n.jsx)(t.strong,{children:"Description"})})]})}),(0,n.jsxs)(t.tbody,{children:[(0,n.jsxs)(t.tr,{children:[(0,n.jsx)(t.td,{children:(0,n.jsx)(t.code,{children:"CharacterController"})}),(0,n.jsxs)(t.td,{children:["Reference to the CharacterController, included to run the ",(0,n.jsx)(t.code,{children:"Move()"})," method during ",(0,n.jsx)(t.code,{children:"Update()"}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:"float"})," moveSpeed"]}),(0,n.jsxs)(t.td,{children:["The speed at which the characterController will move, multiplied internally by ",(0,n.jsx)(t.code,{children:"Time.deltaTime"}),"."]})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:"TextMeshProUGUI"})," hitNameText"]}),(0,n.jsx)(t.td,{children:"A reference to the target textField to update when a collision is detected."})]}),(0,n.jsxs)(t.tr,{children:[(0,n.jsxs)(t.td,{children:[(0,n.jsx)(t.code,{children:"Transform"})," characterControllerStartPos"]}),(0,n.jsx)(t.td,{children:"The position from which the characterController will start its journey each time."})]})]})]}),"\n",(0,n.jsx)(t.h4,{id:"events",children:"Events"}),"\n",(0,n.jsx)(t.p,{children:"The graph has four events:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"Update()"})," runs continuously, calling ",(0,n.jsx)(t.code,{children:"Move()"})," on the characterController to move it forward."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"OnControllerColliderHit()"})," runs whenever the characterController collides with a non-player object. The name of the object is extracted from the ",(0,n.jsx)(t.code,{children:"ControllerColliderHit"})," struct passed through by the event, and set on the ",(0,n.jsx)(t.code,{children:"hitNameText"})," field."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"OnControllerColliderHitPlayer()"})," runs whenever the characterController collides with a Player. The name of the Player is extracted from the ",(0,n.jsx)(t.code,{children:"ControllerColliderPlayerHit"})," struct passed through by the event, and set on the ",(0,n.jsx)(t.code,{children:"hitNameText"})," field."]}),"\n",(0,n.jsxs)(t.li,{children:[(0,n.jsx)(t.code,{children:"__ResetCharacterController()"})," is a custom event which is called from the two collision events to reset the characterController back to its starting position."]}),"\n"]})]})}function x(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(p,{...e})}):p(e)}},89533:(e,t,r)=>{r.d(t,{A:()=>l});const l=r.p+"assets/images/detect-controller-collide-2b7b41b9b503236045f732f6590d4004.png"}}]);